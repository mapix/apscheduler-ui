
<html>
    <head><meta charset="utf-8" /><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans&display=swap" rel="stylesheet"></head>
    <body style="background-color: #1D1E2E">
        
        <script type="text/javascript" src="lib/plotly-basic.min.js"></script>
        <script type="text/javascript" src="plot/aesthetics.js"></script>
        <script type="text/javascript" src="plot/plotly_templates.js"></script>
        <script type="text/javascript" src="plot/scheduler_plot.js"></script>
        <script type="text/javascript" src="model/scheduler.js"></script>
        <script type="text/javascript" src="model/job.js"></script>
        <script type="text/javascript" src="mock_data.js"></script>

        <div id="plots-container" style="width: 100%">
            <div style="overflow: hidden; height: 40px; width: 100%">
                <div id="plotly-upper-axis" style="width: 100%; height: 90px; margin: 0 auto; margin-bottom: -1px;" class="plotly-graph-div"></div>
            </div>
            <div id="plotly-main-plot" style="width: 100%; height: 0; margin: 0 auto;" class="plotly-graph-div"></div>
            <div style="overflow: hidden; height: 44px; width: 100%">
                <div id="plotly-lower-axis" style="width: 100%; height: 90px; margin: 0 auto; margin-top: -1px;" class="plotly-graph-div"></div>
            </div>
        </div>
        <script type="text/javascript">
            let scheduler = new Scheduler(scheduler_mock_data);
            let scheduler_plot = new SchedulerPlot(scheduler, 3600000);

            (function(){
                var plots_container = document.getElementById('plots-container');
                var main_plot = document.getElementById('plotly-main-plot');
                var upper_axis = document.getElementById('plotly-upper-axis');
                var lower_axis = document.getElementById('plotly-lower-axis');

                var resizeDebounce = null;

                function renderPlot() {
                    var bb = plots_container.getBoundingClientRect();
                    console.log(bb.width);
                    scheduler_plot.target_plot_width = bb.width;
                    scheduler_plot.plot(main_plot, upper_axis, lower_axis);

                    // main_plot.on('plotly_click', function(data){
                    //     console.log('Click!')
                    //     var pts = '';
                    //     for(var i=0; i < data.points.length; i++){
                    //         pts = 'x = '+data.points[i].x +'\ny = '+
                    //             data.points[i].y.toPrecision(4) + '\n\n';
                    //     }
                    //     alert('Closest point clicked:\n\n'+pts);
                    // });
                }
                
                window.addEventListener('resize', function() {
                    if (resizeDebounce) {
                        window.clearTimeout(resizeDebounce);
                    }
                    resizeDebounce = window.setTimeout(renderPlot, 100);
                });

                renderPlot();
           }());
        </script>
    </body>
</html>
